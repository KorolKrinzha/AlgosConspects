# Структуры данных - Семинар

Лекции: Стек, очередь, дек и куча

## Динамический массив или ArrayList

Почему так называется? Может увеличиваться и уменьшаться по ходе своей работы (то есть динамически)

Как работает ArrayList под капотом?

- При создании создается массив фиксированного размера
- При добавлении элемента в массив, если он заполнен, создается новый массив большего размера (в два раза больше) и копируются все элементы из старого массива в новый
- При удалении элемента из массива, если он заполнен меньше чем на 1/4, создается новый массив меньшего размера и копируются все элементы из старого массива в новый

### Пример работы

- Шаг 1: [1,3] size = 2, capacity = 2
- Шаг 2: Хотим добавить 5.
- Шаг 3: _(увеличиваем в два раза)_ [1,3,5, 0] size = 3, capacity = 4
- Шаг 4: Хотим добавить 7.
- Шаг 5: [1,3,5,7] size = 4, capacity = 4
- Шаг 6: Хотим добавить 9.
- Шаг 7: _(увеличиваем в два раза)_ [1,3,5,7,9,0,0,0] size = 5, capacity = 8
  ...

### Временная сложность

- Добавление первого элемента: 1
- Добавление второго элемента: 1
- Добавление третьего элемента: 4
- Добавление четвертого элемента: 1
- Добавление пятого элемента: 8
- Добавление шестого элемента: 1
- Добавление седьмого элемента: 1
- Добавление восьмого элемента: 1
- Добавление девятого элемента: 16
  ...

Количество операций в среднем на один элемент: 2

Сложность добавления элемента: O(1)

## Стек

Стек - это структура данных, которая работает по принципу LIFO (last in first out) - последним пришел, первым вышел.

Абстрактная структура данных.

Характеристики стека:

1. push - добавить последний - O(1)
2. top - посмотреть последний - O(1)
3. pop - посмотреть и убрать последний - O(1)

## Односвязный список

Односвязный список - это структура данных, которая состоит из узлов, каждый из которых содержит значение и ссылку на следующий узел.

```
x -> y -> z -next-> t -> null
```

x - Head
t - Tail

```
10 -> 20 -> 30 -> 40 -> null
```

Добавление элемента создается переназначением ссылки на следующий элемент.

```
10 -> 20 -> 25 -> 30 -> 40 -> null
```

Переписали объект 20, чтобы он указывал на 25. 25 указывает на 30

```java
class Node<T> {
    public T value;
    public Node next;
}
```

Теперь добавим к нашему списку поле previous - ссылку на предыдущий элемент. Получится двусвязный список.

## Двусвязный список

```
null <- x <--> y <--> z <-next-> t ->  null
```

```java
class Node<T> {
    public T value;
    public Node next;
    public Node prev;
}
```

### Временная сложность

- Добавление элемента в начало: O(1)
- Обращение к HEAD/TAIL: O(1)
- Добавление элемента в конец: O(1)

## Очередь

Очередь - это структура данных, которая работает по принципу FIFO (first in first out) - первым пришел, первым вышел.

```
H --> x --> x --> x --> x --> T

Движение: <----------------
```

### Временная сложность

- Добавление элемента в начало: O(1)
- Удаление последнего элемента: O(1) или O(n) в зависимости от реализации

## Дек

Дек - абстрактная структура данных, работает на связных списках. Двусторонняя очередь.

### Операции

- popLast
- pushLast
- topLast
- popFirst
- pushFirst
- topFirst

То есть дек делает операции стека и очереди.

## Разбор задач

### Задача на стек - проверка на правильность скобок

```
((())) - true
(())) - false
```

Заметим что: последняя открывающая скобка должна быть закрыта первой закрывающей скобкой.

Что это: first in last out - стек

Встречаем открывающую скобку - кладем ее в стек.
Встречаем закрывающую скобку - проверяем, что она закрывает последнюю открывающую скобку. Если нет - false.
Если да - удаляем последнюю открывающую скобку из стека.

Если закрывающих больше, чем открывающих: Exception при pop - false
Если открывающих больше, чем закрывающих: стек не пустой в конце - false
Если следующий тип скобки не соответствует верхушке - false (пример: _[(])_ )
Если стек пустой - true

### Задача на реализацию очереди двумя стеками

Два стека: popstack и pushstack

Операции: push, pop, top

Пример работы

- Шаг 1: push(1), push(2), push(3)
- Шаг 2: pushstack: 1 2 3, popstack: null
- Шаг 3: pop() в pushstack
- Шаг 4: popstack: 3 2 1, pushstack: null
- Шаг 5: pop() в popstack
- Шаг 6: popstack: 3 2, pushstack: null
- Шаг 7: push(4)
- Шаг 8: pushstack: 4, popstack: 2 1
- Шаг 9: pop() в pushstack
- Шаг 10: popstack: 3, pushstack: 4

### Задача на реализацию стека одной очередью

Push - O(n), pop - O(1)

Пример работы

- Шаг 1: push(1), push(2), push(3) - циклический сдвиг за O(n) при добавлении каждого элемента
- Шаг 2: queue1: 1, 2, 3 queue2: null
- Шаг 3: pop()
