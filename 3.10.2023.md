## Квадратичные сортировки - Лекция

Вставки, выбором, пузырек

## Что такое сортировка?

Сортировка - упорядочивание набора объекта по некоторому признаку.

Какими бывают объекты?

- Числа
- Строки
- Классы (например, людей можно отсортировать по росту)

Операции сравнения: меньше, больше, равно

В чем разница упорядочивания по невозрастанию и убыванию? невозрастание допускает равенство объектов, а убывание нет

Невозрастание = возрастание + равенство

Неубывание = убывание + равенство

**Инверсия** - некорректное расположение чисел друг относительно друга

- [3,2,10,1,8]. Пара [3,2] - инверсия в неупорядоченном массиве
- [1,2,3,8,10] - инверсий нет

## Сортировки устойчивые и неустойчивые

Устойчивые - если два одинаковых элемента в массиве,
то после сортировки они остаются на своих местах

Неустойчивые - если два одинаковых элемента в массиве,
то после сортировки они могут поменяться местами

Устойчивые алгоритмы сортировки:

- пузырьковая
- вставкой
- выбором
- поразрядная

## Сортировка пузырьком

Всего n элементов. Нужно сделать n-1 проходку.

Как улучшить алгоритм?
Возможно, на каком-то этапе алгоритма все элементы встанут на свои места.
Как понять? Если мы пошли по массиву слева направо и не исправили ни одной инверсии, то массив уже отсортирован.

**Сложность алгоритма: O(n^2).**
Почему так? n-1 раз проходимся по n элементам. то есть n^2-1 или просто n^2

Как улучшить?

- Если за шаг не исправили ни одной инверсии, то массив уже отсортирован.
  (не далеко от n^2, но все равно оптимизация)
- Не рассматривать уже отсортированные элементы.

Пример пункта 2: [3,5,1,2,8,10] - два самых тяжелых элемента уже в конце массива, их не проходим

## Сортировка выбором

0. Мысленно разбиваем массив на две части: отсортированную и неотсортированную.
1. Проходим по неотсортированной части массива и ищем минимальный элемент.
2. Если это минимум, то меняем его с первым элементом неотсортированной части. Он должен быть в начале неотсортированной части.
3. Переходим к следующему элементу неотсортированной части, оттуда начинаем поиск минимума. Меняем его с **первым элементом неотсортированной части**. Он должен быть в начале неотсортированной части.
4. Повторяем пока неотсортированная часть не закончится.

## Сортировка вставками

Похоже на сортировку выбором, но вместо поиска минимума мы ищем место для вставки элемента.

0. Мысленно разбиваем массив на две части: отсортированную и неотсортированную.
1. Берем первый элемент неотсортированной части и вставляем его в отсортированную часть.
2. Расширяем отсортированную часть на один элемент.
3. Переходим к следующему элементу неотсортированной части, оттуда начинаем поиск места для вставки. Вставляем его в отсортированную часть.

Пример:

1. [2,5,6,1,9,1,1,10]
2. [2] [5,6,1,9,1,1,10]
3. [2,5] [6,1,9,1,1,10]
4. [2,5,6] [1,9,1,1,10]
5. "Проталкиваем влево" 1 в [2,5,6]
   - [2,5,6,1]
   - [2,5,1,6]
   - [2,1,5,6]
   - [1,2,5,6]
6. [1,2,5,6,9] [1,1,10]
7. "Проталкиваем влево" 1 в [1,2,5,6,9]
   - [1,2,5,6,9,1]
   - [1,2,5,6,1,9]
   - [1,2,5,1,6,9]
   - [1,2,1,5,6,9]
   - [1,1,2,5,6,9]
8. [1,1,2,5,6,9,1,10]
   ...
9. [1,1,1,1,2,5,6,9,10]

Почему n^2:
в худшем случае при сортировке массива [n,n-1,n-2,...,2,1] мы сделаем n-1 шагов.
Каждый раз будем проталкивать n раз.
Итого n(n-1) или n^2

**Разница между сортировкой вставками и выбором:**
в выборе проходимся по неотсортированной части, а в вставке работаем с отсортированной.

## Сортировка подсчетом

Создаем массив счетчиков, в котором будем хранить количество элементов равных i.

i - максимум массива.

Каждому i-ому элементу массива счетчиков присваиваем количество элементов равных индекус i.

O(max(n, maxvalue))

## Heap sort

0. Создаем кучу из массива
1. Пока куча не пуста, берем максимальный элемент и вставляем его в конец массива
2. Уменьшаем размер кучи на 1
3. Просеиваем корень кучи
4. Повторяем пока куча не пуста

Пример работы алгоритма:

```
Шаг 1. Создаем кучу из массива
     12
    / \
   9   8
  / \ /  \
 4  3 7   5

Шаг 2. Берем максимальный элемент, вынимаем из неотсортированного массива
     5
    / \
   9   8
  / \ /  \
 4  3 7

     9
    / \
   5   8
  / \ /  \
 4  3 7

[12]

Шаг 3. Повторяем пока куча не пуста
     8
    / \
   5   7
  / \ /  \
 4  3 7

 [12,9,8]

....

[12,9,8,7,5,4,3]
```
